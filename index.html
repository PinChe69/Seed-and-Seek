<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed and Seek 蛋白質設計優化平台</title>
    <meta name="description" content="Seed and Seek 提供專業的蛋白質設計優化服務，根據客戶需求定向生成優化的蛋白質序列，推動生物科技創新。">
    <meta name="keywords" content="蛋白質設計,蛋白質優化,生物科技,蛋白質工程,Seed and Seek">
    <link rel="icon" type="image/png" href="logo/sns_short_logo.png">
    <link rel="shortcut icon" type="image/png" href="logo/sns_short_logo.png">
    <link rel="apple-touch-icon" href="logo/sns_short_logo.png">
    <link rel="stylesheet" href="styles.css">
    <script src="components/load-components.js" defer></script>
    <!-- NGL Viewer for 3D protein visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ngl/2.0.0-dev.37/ngl.js"></script>
    
    <style>
        /* 強制覆蓋，確保畫布絕對可見 */
        .scrolly-container {
            z-index: 10 !important; /* 比 Hero 高 */
            background: white;      /* 避免透明造成重疊 */
        }
        .protein-viewer-wrapper {
            z-index: 100 !important;
            pointer-events: none; /* 讓滾輪可以滾動頁面 */
        }
        .protein-viewer-item {
            z-index: 101 !important;
            opacity: 0.5; /* 初始半透明，但允許 JS 控制（移除 !important） */
            transition: opacity 0.1s linear; /* 讓變化更即時 */
        }
        /* 讓 NGL Stage 能夠接收滑鼠事件(如果需要旋轉)，或者設為 none */
        .ngl-stage {
            pointer-events: auto !important;
            background: transparent !important; /* 去背：背景透明 */
        }
        
        /* 確保 canvas 背景也是透明的 */
        .ngl-stage canvas {
            background: transparent !important;
        }
    </style>
</head>
<body class="homepage">
    <div class="page-shell">
        <header class="site-header">
            <div class="header-container">
                <a class="logo-group" href="index.html" aria-label="Seed and Seek 首頁">
                    <img src="logo/sns_short_logo.png" alt="Seed and Seek Logo" class="logo-image">
                </a>
                <nav class="primary-nav" aria-label="主選單">
                    <ul>
                        <li><a href="index.html" data-nav="home">首頁</a></li>
                        <li><a href="about.html" data-nav="about">關於我們</a></li>
                        <li><a href="collab-methods.html" data-nav="collab">合作方式</a></li>
                        <li><a href="contact.html" data-nav="contact">聯絡我們</a></li>
                    </ul>
                </nav>
                <button class="menu-toggle" aria-expanded="false" aria-controls="mobile-nav">
                    <span></span><span></span><span></span>
                </button>
            </div>
            <nav class="mobile-nav" id="mobile-nav">
                <a href="index.html">首頁</a>
                <a href="about.html">關於我們</a>
                <a href="collab-methods.html">合作方式</a>
                <a href="contact.html">聯絡我們</a>
            </nav>
        </header>

        <main>
            <!-- Hero Section -->
            <section class="hero-home" id="homepage-hero">
                <div class="hero-overlay"></div>
                <div class="hero-container">
                    <div class="hero-tag">Seed and Seek · Protein Design & Optimization</div>
                    <h1 class="hero-title">加速演化，精準優化</h1>
                    <p class="hero-subtitle">AI 驅動的蛋白質序列優化平台</p>
                    <p class="hero-description">
                        提交您的原型序列與優化目標，我們的專有生成式 AI 引擎將在數天內交付優化序列。從數月的濕實驗迭代，縮短至數天的計算設計，大幅加速您的藥物研發流程。
                    </p>
                    <div class="hero-cta">
                        <a href="contact.html" class="btn btn--primary">開始優化</a>
                        <a href="about.html" class="btn btn--secondary">了解更多</a>
                    </div>
                </div>
            </section>

            <!-- Protein 3D Visualization Section - Scrollytelling -->
            <section class="scrolly-container" id="scrolly-section">
                <div class="sticky-view">
                    
                    <div class="protein-slogan-wrapper" id="slogan-wrapper">
                        <div class="protein-slogan-left">
                            <h2 class="slogan-text">加速演化</h2>
                            <p class="company-name">Seed and Seek</p>
                        </div>
                        <div class="protein-slogan-right">
                            <h2 class="slogan-text">精準優化</h2>
                            <p class="company-tagline">AI Protein Design</p>
                        </div>
                    </div>

                    <div class="protein-viewer-wrapper" id="protein-wrapper">
                        <div class="protein-viewer-item" id="item-structure">
                            <div id="stage-structure" class="ngl-stage"></div>
                        </div>
                        <div class="protein-viewer-item" id="item-fluorescence">
                            <div id="stage-fluorescence" class="ngl-stage"></div>
                        </div>
                        <div class="protein-viewer-item" id="item-sequence">
                            <div id="stage-heatmap" class="ngl-stage"></div>
                        </div>
                    </div>

                    <div class="protein-labels-wrapper" id="labels-wrapper">
                        <div class="protein-label-item">
                            <h3>結構 Structure</h3>
                            <p>透過三、四級結構分析，深入理解蛋白質的空間構型與摺疊模式。</p>
                        </div>
                        <div class="protein-label-item">
                            <h3>功能 Function</h3>
                            <p>模擬蛋白質的功能特性，預測其在特定環境下的行為。</p>
                        </div>
                        <div class="protein-label-item">
                            <h3>序列 Sequence</h3>
                            <p>基於序列順序的映射，揭示胺基酸排列對結構與功能的影響。</p>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Key Benefits Section -->
            <section class="section content-section">
                <div class="section-title">
                    <h2>為什麼選擇計算優化</h2>
                    <p>數據驅動的精準設計，大幅縮短研發時程</p>
                </div>
                <div class="features-list">
                    <div class="feature-item">
                        <h3>速度：天數而非月數</h3>
                        <p>虛擬篩選在數天內交付優化候選序列，而非傳統濕實驗室的數月迭代循環。從原型序列到優化候選物，加速您的研發流程，更快進入驗證階段。</p>
                    </div>
                    <div class="feature-item">
                        <h3>精準：數據驅動預測</h3>
                        <p>基於物理的分子動力學模擬結合高維度神經計算模型，確保可靠的預測。我們的混合方法同時最大化結構穩定性與功能性表現，提供按預測效能指標排序的候選序列。</p>
                    </div>
                    <div class="feature-item">
                        <h3>安全：您的智慧財產權受保護</h3>
                        <p>客戶保留對輸入與輸出序列的 100% 所有權。我們採用企業級加密與保密協議（NDA），確保您的序列資料不會被分享或用於訓練公開模型。所有提交資料均經過加密處理。</p>
                    </div>
                    <div class="feature-item">
                        <h3>客製化：處理複雜約束條件</h3>
                        <p>針對您的特定限制條件進行客製化優化：目標結合親和力、熱穩定性、表現產量或治療特性。我們處理現成軟體無法應對的複雜、非標準約束條件。</p>
                    </div>
                    <div class="feature-item">
                        <h3>專業：跨領域專家團隊</h3>
                        <p>我們的團隊匯聚醫學科學與神經計算領域的專家研究員，專注解決「結構-功能」難題。結合計算生物學、結構生物學與蛋白質工程的深度專業知識。</p>
                    </div>
                    <div class="feature-item">
                        <h3>效率：計算優先方法</h3>
                        <p>採用「計算優先」策略，大幅減少濕實驗浪費。先透過計算篩選最優候選序列，再進行實驗驗證，提高成功率並降低成本。</p>
                    </div>
                </div>
            </section>

            <!-- How It Works Section -->
            <section class="section content-section" style="background: var(--bg-light);">
                <div class="section-title">
                    <h2>運作流程</h2>
                    <p>從原型序列到優化候選物的精簡三步流程</p>
                </div>
                <div class="workflow-steps">
                    <div class="workflow-step">
                        <div class="step-number">01</div>
                        <h3>提交約束條件</h3>
                        <p>提交您的目標序列與優化目標（例如：提高穩定性、改善溶解度、特定結合親和力）。我們的計算生物學研究人員分析您的規格，定義優化參數（pH、溫度、結合目標等）。</p>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">02</div>
                        <h3>AI 驅動優化</h3>
                        <p>我們的專有生成式 AI 引擎與體外演化平台生成數千種變體序列，並透過高維度神經計算與分子動力學模擬進行篩選與驗證。迭代精煉確保品質與穩定性。</p>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">03</div>
                        <h3>接收優化序列</h3>
                        <p>接收多個按預測效能指標排序的優化序列。每個候選序列以 FASTA/PDB 格式交付，包含詳細分析報告與模擬驗證數據，便於您的決策與後續實驗驗證。</p>
                    </div>
                </div>
            </section>

            <!-- Trust / Credibility Section -->
            <section class="section content-section">
                <div class="section-title">
                    <h2>基於業界標準</h2>
                    <p>建構在成熟的計算生物學框架之上</p>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; max-width: 900px; margin: 0 auto; text-align: center;">
                    <div style="padding: 2rem; background: var(--bg-light); border-radius: 12px;">
                        <h4 style="color: var(--primary-green); margin-bottom: 0.5rem;">深度學習</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">神經網路架構</p>
                    </div>
                    <div style="padding: 2rem; background: var(--bg-light); border-radius: 12px;">
                        <h4 style="color: var(--primary-green); margin-bottom: 0.5rem;">結構生物學</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">蛋白質折疊預測</p>
                    </div>
                    <div style="padding: 2rem; background: var(--bg-light); border-radius: 12px;">
                        <h4 style="color: var(--primary-green); margin-bottom: 0.5rem;">分子動力學</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">穩定性驗證</p>
                    </div>
                </div>
            </section>

        </main>

        <footer class="site-footer">
            <div class="footer-grid">
                <div class="footer-brand">
                    <div class="logo-group" aria-label="Seed and Seek">
                        <img src="logo/sns_short_logo.png" alt="Seed and Seek Logo" class="logo-image">
                    </div>
                    <h3>Seed and Seek</h3>
                    <p class="footer-tagline">Protein Design Optimization Platform</p>
                    <p class="footer-tagline-zh">蛋白質設計優化平台</p>
                </div>
                <div class="footer-links-section">
                    <h4>快速連結</h4>
                    <ul>
                        <li><a href="index.html">首頁</a></li>
                        <li><a href="about.html">關於我們</a></li>
                        <li><a href="collab-methods.html">合作方式</a></li>
                        <li><a href="contact.html">聯絡我們</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h4>聯絡資訊</h4>
                    <p><strong>Email:</strong> <a href="mailto:seednseek.ai@gmail.com">seednseek.ai@gmail.com</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <span>&copy; 2025 Seed and Seek. All rights reserved.</span>
                <div class="footer-legal">
                    <a href="privacy.html">隱私政策</a>
                    <a href="terms.html">服務條款</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Protein 3D Visualization Script - Scrollytelling -->
    <script>
        var stages = [];
        var stageStruct, stageFluoro, stageSeq;

        // ==================================================
        // 1. NGL 初始化與畫圖邏輯 (針對新需求修改)
        // ==================================================
        function initNGL() {
            // 延遲偵測 NGL 載入狀況
            if (typeof NGL === 'undefined') {
                setTimeout(initNGL, 200);
                return;
            }

            function loadStage(id, type) {
                var el = document.getElementById(id);
                if(!el) return null;

                // 建立舞台
                var stage = new NGL.Stage(id, { 
                    backgroundColor: "white", // 先用白色，然後設置為透明
                    tooltip: false,
                    // 提高畫質採樣
                    sampleLevel: 2
                });
                
                // 關鍵：設置背景為完全透明，避免白色覆蓋造成霧霧感
                setTimeout(function() {
                    if (stage.viewer && stage.viewer.renderer) {
                        stage.viewer.renderer.setClearColor(0x000000, 0); // 透明背景 (alpha = 0)
                        stage.viewer.renderer.clear();
                    }
                }, 300);
                
                stage.mouseControls.clear();
                stages.push(stage);
                
                // 載入 PDB
                stage.loadFile("https://files.rcsb.org/download/1EMA.pdb").then(function(o){
                    o.removeAllRepresentations();
                    
                    // === 需求 1: 左圖改成「表面模型」 (全部灰色) ===
                    if(type === 'structure') {
                        // Surface: 展示蛋白質整體外觀形狀，全部灰色
                        o.addRepresentation("surface", {
                            sele: "all",
                            color: "gray",         // 全部改成灰色
                            opacity: 1.0,           // 完全不透明，看起來像固體
                            surfaceType: "av",      // 平滑表面
                            probeRadius: 1.4,
                            quality: "high"
                        });
                    } 
                    // === 需求 2: 中圖改為「清晰輪廓 + 綠色螢光」 (加半透明綠色表面) ===
                    else if (type === 'fluorescence') {
                        // 1. 清晰的骨架 (Cartoon)
                        o.addRepresentation("cartoon", {
                            color: "#00ff00", // 實心綠
                            opacity: 1.0,     // 不透明，線條清楚
                            quality: "high"
                        });

                        // 2. 發光核心的綠色 box-shadow 效果（多層光暈）
                        // 最外層：大範圍綠色光暈（模擬 box-shadow）
                        o.addRepresentation("licorice", { 
                            sele: "CRO",      // 發光團
                            color: "#00ff00", // 綠色
                            radius: 7.0,      // 大範圍
                            opacity: 0.1     // 很淡，模擬外層陰影
                        }); 
                        
                        // 中層：中等範圍綠色光暈
                        o.addRepresentation("licorice", { 
                            sele: "CRO",
                            color: "#66ff66", // 淺綠色
                            radius: 5.0,
                            opacity: 0.5     // 中等透明度
                        }); 
                        
                        // 內層：發光核心（亮白綠色）
                        o.addRepresentation("licorice", { 
                            sele: "CRO",      // 發光團
                            color: "#F4FAEE", // 亮白綠色
                            radius: 3.0,    // 核心大小
                            opacity: 1.0      // 完全不透明
                        }); 

                        // 3. 半透明的綠色表面 (加在上面)
                        o.addRepresentation("surface", {
                            sele: "all",
                            color: "#00ff00",  // 綠色
                            opacity: 0.25,       // 半透明
                            surfaceType: "av", // 平滑表面
                            probeRadius: 1.4,
                            quality: "high",
                            side: "front"      // 只渲染正面
                        });
                    } 
                    // === 右圖: 序列 (保持彩虹色) ===
                    else if (type === 'sequence') {
                        o.addRepresentation("cartoon", { 
                            colorScheme: "residueindex", 
                            opacity: 1.0,     // 設定為完全不透明
                            quality: "high" 
                        });
                    }
                    
                    o.autoView();
                    // 開啟定速自轉展示細節
                    stage.setSpin(true); 
                    
                }).catch(e => console.error("Load failed:", e));
                
                return stage;
            }

            // 依序載入
            stageStruct = loadStage("stage-structure", "structure");
            setTimeout(() => stageFluoro = loadStage("stage-fluorescence", "fluorescence"), 200);
            setTimeout(() => stageSeq = loadStage("stage-heatmap", "sequence"), 400);
        }

        // ==================================================
        // 2. 滾動動畫邏輯 (處理透明度變化)
        // ==================================================
        function handleScrollAnimation() {
            var section = document.getElementById('scrolly-section');
            if(!section) return;

            var wrapper = document.getElementById('protein-wrapper');
            var slogan = document.getElementById('slogan-wrapper');
            var labels = document.getElementById('labels-wrapper');
            
            var itemStruct = document.getElementById('item-structure');
            var itemFluoro = document.getElementById('item-fluorescence');
            var itemSeq = document.getElementById('item-sequence');

            var rect = section.getBoundingClientRect();
            var scrollDistance = rect.height - window.innerHeight;
            var progress = Math.max(0, Math.min(1, -rect.top / scrollDistance));

            // 1. 上升動畫
            var moveUpProgress = Math.min(1, progress / 0.2);
            if(wrapper) {
                var currentTop = 100 - (moveUpProgress * 50);
                wrapper.style.top = currentTop + "%";
                // 確保初始狀態是可見的
                if(moveUpProgress > 0) wrapper.style.opacity = 1;
            }

            // 2. 左右分離與透明度變化
            var separateProgress = 0;
            if (progress > 0.35) {
                separateProgress = Math.min(1, (progress - 0.35) / 0.45);
            }

            var maxOffset = window.innerWidth < 768 ? 0 : 380; 
            var currentOffset = separateProgress * maxOffset;
            
            // === 透明度控制：從 0.5 變到 1.0 ===
            // 初始狀態（progress <= 0.35）：opacity = 0.5
            // 分離完成（progress >= 0.8）：opacity = 1.0
            var baseOpacity = 0.5;
            var targetOpacity = baseOpacity + (separateProgress * (1.0 - baseOpacity)); // 0.5 -> 1.0

            if (itemStruct) {
                itemStruct.style.transform = `translate(calc(-50% - ${currentOffset}px), -50%)`;
                // 使用 setProperty 強制設置透明度，確保覆蓋 CSS
                itemStruct.style.setProperty('opacity', targetOpacity.toString(), 'important');
            }
            if (itemSeq) {
                itemSeq.style.transform = `translate(calc(-50% + ${currentOffset}px), -50%)`;
                itemSeq.style.setProperty('opacity', targetOpacity.toString(), 'important');
            }
            if (itemFluoro) {
                itemFluoro.style.setProperty('opacity', targetOpacity.toString(), 'important');
            }
            
            // 確保初始狀態時透明度正確（還沒開始分離時）
            if (progress <= 0.35) {
                if (itemStruct) itemStruct.style.setProperty('opacity', baseOpacity.toString(), 'important');
                if (itemSeq) itemSeq.style.setProperty('opacity', baseOpacity.toString(), 'important');
                if (itemFluoro) itemFluoro.style.setProperty('opacity', baseOpacity.toString(), 'important');
            }

            // 3. 文字 Slogan 消散
            if(slogan) {
                if(progress > 0.2) {
                    var fadeOut = (progress - 0.2) / 0.15;
                    slogan.style.opacity = Math.max(0, 1 - fadeOut);
                } else {
                    slogan.style.opacity = 1;
                }
            }

            // 4. 下方 Labels 出現
            if (labels) {
                if (progress > 0.8) {
                    var labelAlpha = (progress - 0.8) / 0.2;
                    labels.style.opacity = labelAlpha;
                    labels.style.transform = `translateX(-50%) translateY(${(1-labelAlpha)*20}px)`;
                } else {
                    labels.style.opacity = 0;
                    labels.style.transform = "translateX(-50%) translateY(20px)";
                }
            }
        }

        // 啟動
        document.addEventListener("DOMContentLoaded", function() {
            initNGL();
            window.addEventListener('scroll', () => window.requestAnimationFrame(handleScrollAnimation));
            window.addEventListener('resize', () => {
                stages.forEach(s => s.handleResize());
                handleScrollAnimation();
            });
            
            // 初始執行一次確保畫面正確，並設置初始透明度
            setTimeout(function() {
                handleScrollAnimation();
                
                // 強制設置初始透明度為 0.5，確保圖片一開始是半透明
                var itemStruct = document.getElementById('item-structure');
                var itemFluoro = document.getElementById('item-fluorescence');
                var itemSeq = document.getElementById('item-sequence');
                
                if (itemStruct) {
                    itemStruct.style.setProperty('opacity', '0.5', 'important');
                    itemStruct.style.visibility = "visible";
                }
                if (itemFluoro) {
                    itemFluoro.style.setProperty('opacity', '0.5', 'important');
                    itemFluoro.style.visibility = "visible";
                }
                if (itemSeq) {
                    itemSeq.style.setProperty('opacity', '0.5', 'important');
                    itemSeq.style.visibility = "visible";
                }
            }, 500);
        });
    </script>
</body>
</html>

